library(rstan)
library(shinystan)
library(loo)
setwd("/Users/adam/BlueRipple/research/stan/house/election")
print("Loading csv output.  Might take a minute or two...")
stanFit <- read_stan_csv(c("output/election_betaBinomialInc_UseElectionResults_2012_1.csv","output/election_betaBinomialInc_UseElectionResults_2012_2.csv","output/election_betaBinomialInc_UseElectionResults_2012_3.csv","output/election_betaBinomialInc_UseElectionResults_2012_4.csv"))
print("Extracting log likelihood for loo...")
log_lik <-extract_log_lik(stanFit, merge_chains = FALSE)
print("Computing r_eff for loo...")
rel_eff <- relative_eff(exp(log_lik), cores = 10)
print("Computing loo..")
election_betaBinomialInc_UseElectionResults_2012 <- loo(log_lik, r_eff = rel_eff, cores = 10)
print(election_betaBinomialInc_UseElectionResults_2012)
