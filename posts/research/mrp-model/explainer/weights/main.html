<!doctype html>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-146776294-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-146776294-1');
</script>

<meta name="viewport" content="width=device-width, initial-scale=1.0">
<html lang="English">
<head>
<meta charset="utf-8">
<meta name="generator" content="pandoc">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>What Are We Talking About When We Talk About Electoral Weights?</title>

<!-- Yahoo! CDN combo URL for selected Pure.css modules -->
<link rel="stylesheet" href="https://yui.yahooapis.com/combo?pure/0.6.0/base-min.css&pure/0.6.0/grids-responsive-min.css&pure/0.6.0/menus-min.css&pure/0.6.0/tables-min.css">
<!-- MathJax -->
<script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML"></script>
<!-- Vega and Vega Embed -->
<script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
<script src="https://cdn.jsdelivr.net/npm/vega-lite@3"></script>
<script src="https://cdn.jsdelivr.net/npm/vega-embed@4"></script>

<!-- Extra styles -->
<style>
  @viewport {
      width: device-width;
      zoom: 1.0;
  }
  body {margin:0 0 0}.pure-g{padding:0 1em}.pure-menu-link:focus{background-color:#d3d3d3}nav{margin:0 0 1em;padding:0 0 1em;border-bottom:1px solid #ccc}footer{margin:5em 0 1em}pre{white-space:pre-wrap;margin-left:3em}code{font-size:89%;color:#191919}.author{margin-bottom:0;padding-bottom:0}.headnote,.published,.license{font-size:89%;margin-bottom:.75em}@media screen and (max-width:35.5em){thead{display:none}tr,th,td{display:block}td{border-top:0}tr td:first-child{border-top:1px solid #ddd;font-weight:700}}
  .br-header {
      font-family: proxima-nova, sans-serif;
      letter-spacing: 2px;
      font-weight: 500;
      font-size: 14pt;
      color: white;
      margin-top: 0em;
      margin-left: 0em;
      margin-bottom: 1em;
      margin-right: 0.1em;
      display: flex; 
      flex-direction: row;
      flex-wrap: nowrap;
      justify-content: space-between;
      background-color: black;
      padding: 5px;
      padding-top: 20px;
      padding-bottom: 20px;
  }
  .br-header-logo-wrapper
  {
      width: 140px;
      background-color: white;
      height: 58px;
      margin-left: 10px;
  }
  .br-header-logo
  {
      width: 140px;
      object-fit: contain;
  }
  .br-header-item
  {
      display: flex;
      flex-basis: auto;
  }
  .br-header-br {
      margin-left: 10px;
  }
  .br-header-br a:link, .br-header-br a:visited, .brheader a:hover, .br-header-br a:active
  {
      color: white;
      text-decoration: none;
  }
  .br-home-button-c {
      flex-direction: column;
      justify-content: center;
      margin-right: 10px;
  }
  .br-home-button-b {
      font-size: 10pt;
      border-style: solid;
      border-width: 2px;
      border-color: white;
      border-radius: 25px;
      padding: 5px 20px;
      color: white;
      text-align: center;      
  }
  .br-home-button-b a:hover {
      background-color: white;
  }
  .br-readmore {
      font-style: italic;
  }
  .brTable {
      font-size: 180t
  }
  .brTableTitle {
      text-align: center;
      font-size:  14pt
  }
  .footnotes {
      font-size: 10pt;
  }
  @media screen and (min-width: 600px) {
     .content-wrapper {
	 margin-left: 218px;
	 margin-right: 218px
     }   
  }
  @media screen and (max-width: 600px) {
      .content-wrapper {
	  margin-left: 10px;
	  margin-right: 10px
      }
  }
  figure {
      margin-left: 0px;
      margin-right: 0px;
  }		       
  a, a:link, a:visited, a:hover, a:active {
      color: hsl(175, 43%, 42%);
      text-decoration: none;		
  }
  h1 {
      font-family: Garamond;
      font-weight: 400;
      color: hsla(0,0%,10%,0.9);
      line-height: 1.2em;
      font-size: 32px;
      letter-spacing: 0px		       
  }
  h2 {
      font-family: proxima-nova, sans-serif;
      font-weight: 600;
      color: hsla(0,0%,10%,0.9);
      line-height: 1.2em;
      letter-spacing: 0.05em;
      font-size: 25px;
      text-transform: uppercase;
  }
  .published {
      color: lightslategrey;
      font-family: Garamond;
      font-size: 12pt
  }
  .updated {
      color: lightslategrey;
      font-family: Garamond;
      font-size: 12pt
  }
  body {
      font-family: Garamond;
      font-weight: 400;
      color: hsla(0,0%,10%,0.7);
      font-size: 18px;
      letter-spacing: 0px;
      line-height: 1.6em;      		       
  }  
  table {
      font-size: 10pt;
      margin: 0;
      padding: 0;
      table-layout: auto;
      width: 100%;
  }
  table tr {
      background-color: #f8f8f8;
      border: 0.5px solid #ddd;
      padding: .35em;
  }
  table th,
  table td {
      padding: .125 em;
      border: 1px solid black;
  }
  @media screen and (max-width: 600px) {
      table thead {
	  border: none;
	  clip: rect(0 0 0 0);
	  height: 1px;
	  margin: -1px;
	  overflow: hidden;
	  padding: 0;
	  position: absolute;
	  width: 1px;
      }
      
      table tr {
	  border-bottom: 3px solid #ddd;
	  display: block;
      }
      
      table td {
	  border-bottom: 1px solid #ddd;
	  display: block;
	  text-align: right;
      }
      
      table td::before {
	  content: attr(data-label);
	  float: left;
      }
  }
  table-old {
      border-collapse: collapse;
      font-size: 10pt;
      margin-left: auto;
      margin-right: auto;
      margin-bottom: 24px;
      border-spacing: 0;
      border-bottom: 2px solid black;
      border-top: 2px solid black;
  }

</style>

</head>
<body>
  <div class="br-header">
    <a href="https://www.blueripplepolitics.org">
      <div class="br-header-item br-header-logo-wrapper">
	<img class="br-header-logo" src="https://blueripple.github.io/logo/full.png" alt="BLUE RIPPLE POLITICS"/>
      </div>
    </a>	
    <div class="br-header-item br-home-button-c">
      <a href="https://www.blueripplepolitics.org">
	<div class="br-home-button-b">HOME</div>
      </a>
    </div>
  </div>
<section id="page-content">
<div class="content-wrapper pure-g">
<div class="pure-u-1 pure-u-sm-1 pure-u-md-1 pure-u-lg-1 pure-u-xl-1">

<!-- page content begins here -->

<div class="published">February 21, 2020 </div>
<header>
<h1 class="title">What Are We Talking About When We Talk About Electoral Weights?</h1>
</header>
<p>Our original plan for this post was to delve into the modeling issues surrounding electoral weighting in polling and predicitive modeling of election outcomes. But the country is a very different place then when we started this work. As important as the upcoming elections may be, the corona-virus pandemic is urgent and exhausting.</p>
<p>But there is still an election coming and we still want to be a source of thoughtful ideas for participation for fellow progressives and Democrats. So we are going to continue this work, and try to understand along with you, how our landscape has changed.</p>
<p>–</p>
<p>Predicting election outcomes via polling or survey data is hard: people may not answer accurately or honestly, the people you ask may not be representative of the electorate, and the composition of the electorate in each state is a moving target.</p>
<ul>
<li>Getting accurate answers, is a key part of a pollsters job. Some surveys, e.g., the <a href="https://cces.gov.harvard.edu/">CCES survey</a>, one we use a lot, tackle this issue by verifying some data externally, for example via state voter-files.</li>
<li>Surveys and polls assign <em>weights</em> to responses, numbers that allow users of the data to reconstruct a representative sample of the population from the survey. For example, if the country has roughly the same number of adults above and below 45 but the survey has fewer responses from older people, those responses will be assigned higher weights. Weighting is complex, not least because there are many demographic variables to be considered.</li>
<li>But we truly <em>do not know</em> who will vote on election day. You could have extremely accurate estimates of how each kind of person (older or younger, male or female, Black, White, Latinx, Asian, Texan or Californian, etc.) <em>would</em> vote and not really know <em>how many</em> of them <em>will</em> vote. This gets even harder to predict in smaller regions, like states, congressional districts or state legislative districts.</li>
</ul>
<p>We have very accurate information about who lives in each of these places. The census tracks this and updates the data annually. So what we need to know is the probability that a voter of a certain demographic type, in a certain place, will cast a vote. There are lots of reasons why people do and don’t vote: see <a href="https://blueripplepolitics.org/blog/voter-ids">our piece</a> on voter ID or Fair Vote’s <a href="https://www.fairvote.org/voter_turnout#voter_turnout_101">rundown</a> on voter turnout, for example. For the purposes of <em>this post</em> we’re going to ignore the reasons and focus on the modeling problem. For another point of view, <a href="https://www.nytimes.com/2016/06/10/upshot/how-we-built-our-model.html">here</a> is an explanation from the New York Times’ Upshot about their election modeling.</p>
<p>When pollsters and academics talk about this problem, they use the term “weighting” or “weights.” The weighting of a survey to match the electorate is just like what we talked about above, when polls are weighted to match the population, except here the weights are chosen to match some estimate of what the electorate will look like. But we will often talk instead about probabilities, the chance that a given voter will vote. These probabilities, multiplied by the number of people in a given group, a number we know quite accurately, provide the “electoral weight”. for example, if 60% of Texan Females over 45 will vote (a probability), and you know how many Texan Females over 45 there are (about 1.2 million) you can figure out how to weight your survey responses so that the weighted tally contains about 738,000 female Texan voters over 45.</p>
<p>So how do we figure out the probability that someone will vote? There are a number of standard approaches:</p>
<ol type="1">
<li>Ask them! Some surveys ask the respondent if they intend to vote, or, more often, a <a href="https://www.pewresearch.org/methods/2016/01/07/measuring-the-likelihood-to-vote/">bunch of questions</a> used to assess their likelihood of voting, and then use that (or some modeled fraction of that) to create a set of weights with as much specificity as the survey allows. This is almost always what pollsters do.</li>
<li>Assume the next election will be like the last election. The census tracks nationwide demographically split turnout for previous elections and we can use those weights, though they lack any geographic specificity. Also, some surveys match respondents with voter-file data and thus turnout. These can then be used to build a set of weights.</li>
<li>Model the electorate using some combination of the above data—previous elections, surveys—and whatever other variables, e.g., negative partisanship of a district, to predict how the current electorate might differ from the past.</li>
</ol>
<p>Rather than opine on the best model, which is not our expertise, we want to demonstrate how much a prediction can depend on the model of electoral weights. We want you to become a more informed (and skeptical!) reader of polls and academic work predicting electoral results.</p>
<p>This piece was partially inspired by a recent <a href="https://www.vox.com/policy-and-politics/2020/2/25/21152538/bernie-sanders-electability-president-moderates-data">Vox article</a>, which used a novel survey to look at how each candidate in the Democratic primary might fare against Donald Trump. The <a href="https://osf.io/25wm9/">paper</a> on which the article is based is interesting and worth a read. Some of the conclusions of the paper and article are based on electoral weights derived from the 2016 election (using the CCES survey). It’s very hard to evaluate these conclusions without understanding how sensitive they are to the choice of electoral weights.</p>
<p>So let’s explore how much difference these weights can make! We’ll fix our voter preferences to an estimate from the 2016 presidential election (using a variation of the <a href="https://blueripple.github.io/research/mrp-model/p1/main.html#data-and-methods">MR model</a> we’ve used in the last couple of posts), and use 2016 <a href="https://www.census.gov/programs-surveys/acs/technical-documentation/pums.html">demographics</a> from the census. The only thing we’ll be varying here are the electoral weights, that is, the likelihood that a given type of voter, in a given place, will vote</p>
<p>We’ll begin by picking a few possible sets of weights and comparing the projected popular vote and electoral college results that they predict from the <em>same set of preferences</em>—in this case, preferences derived from our <a href="https://blueripple.github.io/research/mrp-model/p1/main.html#data-and-methods">MRP model</a> based on the <a href="https://cces.gov.harvard.edu/">CCES</a>.<br />
One note: each set of weights has been adjusted on a per state basis so that the weights and demographics (in the same election year) correctly give the total number of votes cast in the state that year–if you’re interested in the details, we followed a simplified version of the techniques described in <a href="http://www.stat.columbia.edu/~gelman/research/unpublished/deep-inter.pdf">this paper</a>. We used State-level probabilities inferred from either the CCES survey for the 2008, 2012 and 2016 general elections, or the Census CPS survey (using Microdata), each broken down by age (45 or over/under 45), sex (Female/Male), education (College Grad and in College/otherwise) and race (Non-white/White Non-hispanic).</p>
<p>We’re not recommending any of these weights in particular, but each might be a reasonable model of the 2020 electorate since each is derived from a validated source and a recent election.</p>
<p>The chart below shows the Democratic share of the 2-party popular vote and the number of electors won by the Democratic candidate using (modeled) 2016 preferences, 2016 demographics and each set of electoral weights. The results vary quite a bit, from a popular vote share below 49.5% and 190 electoral votes to a popular vote share over 53% and over 370 electoral votes! That’s a swing of almost 4% in the popular vote (~6 million votes) and the difference between losing and winning the election.</p>
<figure id="figure_1">
<script type="text/javascript">var vlSpec=
{
    "height": 800,
    "autosize": {
        "resize": true,
        "type": "fit",
        "contains": "padding"
    },
    "config": {
        "view": {
            "continuousHeight": 800,
            "continuousWidth": 800,
            "discreteHeight": 800,
            "discreteWidth": 800
        }
    },
    "data": {
        "values": [
            {
                "DemPref": 0.536672492746356,
                "ElectorsR": 173,
                "year": 2008,
                "DemographicGrouping": "ASER",
                "WeightSource": "Census (ASER) 2008",
                "ElectoralWeightSource": "EW_Census",
                "ElectorsD": 365
            },
            {
                "DemPref": 0.524709910290556,
                "ElectorsR": 226,
                "year": 2008,
                "DemographicGrouping": "ASER",
                "WeightSource": "CCES (ASER) 2008",
                "ElectoralWeightSource": "EW_CCES",
                "ElectorsD": 312
            },
            {
                "DemPref": 0.5346793073282088,
                "ElectorsR": 165,
                "year": 2012,
                "DemographicGrouping": "ASER",
                "WeightSource": "Census (ASER) 2012",
                "ElectoralWeightSource": "EW_Census",
                "ElectorsD": 373
            },
            {
                "DemPref": 0.5081650056273329,
                "ElectorsR": 316,
                "year": 2012,
                "DemographicGrouping": "ASER",
                "WeightSource": "CCES (ASER) 2012",
                "ElectoralWeightSource": "EW_CCES",
                "ElectorsD": 222
            },
            {
                "DemPref": 0.5300134370126306,
                "ElectorsR": 195,
                "year": 2016,
                "DemographicGrouping": "ASER",
                "WeightSource": "Census (ASER) 2016",
                "ElectoralWeightSource": "EW_Census",
                "ElectorsD": 343
            },
            {
                "DemPref": 0.4931302113453388,
                "ElectorsR": 352,
                "year": 2016,
                "DemographicGrouping": "ASER",
                "WeightSource": "CCES (ASER) 2016",
                "ElectoralWeightSource": "EW_CCES",
                "ElectorsD": 186
            }
        ],
        "format": {
            "parse": {}
        }
    },
    "width": 800,
    "$schema": "https://vega.github.io/schema/vega-lite/v4.json",
    "title": "Popular vote share and Electoral Votes for 2016 preferences and demographics and various electoral weights",
    "layer": [
        {
            "transform": [
                {
                    "as": "Vote Share (%)",
                    "calculate": "100 * datum.DemPref"
                },
                {
                    "as": "Weight Source",
                    "calculate": "datum.ElectoralWeightSource + '/' + datum.DemographicGrouping"
                }
            ],
            "mark": {
                "size": 100,
                "tooltip": {
                    "content": "data"
                },
                "type": "point",
                "filled": true
            },
            "encoding": {
                "color": {
                    "field": "year",
                    "type": "nominal"
                },
                "shape": {
                    "field": "Weight Source"
                },
                "x": {
                    "field": "Vote Share (%)",
                    "scale": {
                        "domain": [
                            48.5,
                            54
                        ]
                    },
                    "title": "D Vote Share (%)",
                    "type": "quantitative"
                },
                "y": {
                    "field": "ElectorsD",
                    "scale": {
                        "domain": [
                            170,
                            370
                        ]
                    },
                    "title": "# D Electoral Votes",
                    "type": "quantitative"
                }
            }
        },
        {
            "transform": [
                {
                    "as": "50%",
                    "calculate": "50"
                }
            ],
            "mark": "rule",
            "encoding": {
                "x": {
                    "field": "50%",
                    "scale": {
                        "domain": [
                            48,
                            53
                        ]
                    },
                    "title": null,
                    "type": "quantitative"
                }
            }
        },
        {
            "transform": [
                {
                    "as": "Evenly Split",
                    "calculate": "269"
                }
            ],
            "mark": "rule",
            "encoding": {
                "y": {
                    "field": "Evenly Split",
                    "scale": {
                        "domain": [
                            170,
                            370
                        ]
                    },
                    "title": null,
                    "type": "quantitative"
                }
            }
        }
    ],
    "padding": 10
};
vegaEmbed('#figure_1',vlSpec);</script>
</figure>
<p>There is substantially more variation among the models using CCES weights than the model using weights from the census. The CCES models also look more like the actual election outcomes, though that could just be a coincidence. The census-sourced electoral weights predict higher turnout from younger voters and minority voters than does the CCES data, and is thus much more Democratic-candidate-friendly than the CCES data.</p>
<figure id="figure_2">
<script type="text/javascript">var vlSpec=
{
    "height": 800,
    "autosize": {
        "resize": true,
        "type": "fit",
        "contains": "padding"
    },
    "config": {
        "view": {
            "continuousHeight": 800,
            "continuousWidth": 800,
            "discreteHeight": 800,
            "discreteWidth": 800
        }
    },
    "data": {
        "values": [
            {
                "DemPref": 0.5300134370126306,
                "ElectorsR": 195,
                "year": 2016,
                "DemographicGrouping": "ASER",
                "WeightSource": "Census (ASER) 2016",
                "ElectoralWeightSource": "EW_Census",
                "ElectorsD": 343
            },
            {
                "DemPref": 0.4931302113453388,
                "ElectorsR": 352,
                "year": 2016,
                "DemographicGrouping": "ASER",
                "WeightSource": "CCES (ASER) 2016",
                "ElectoralWeightSource": "EW_CCES",
                "ElectorsD": 186
            },
            {
                "DemPref": 0.5314955771129772,
                "ElectorsR": 186,
                "year": 2018,
                "DemographicGrouping": "ASER",
                "WeightSource": "Census (ASER) 2018",
                "ElectoralWeightSource": "EW_Census",
                "ElectorsD": 352
            },
            {
                "DemPref": 0.4888492003896323,
                "ElectorsR": 352,
                "year": 2018,
                "DemographicGrouping": "ASER",
                "WeightSource": "CCES (ASER) 2018",
                "ElectoralWeightSource": "EW_CCES",
                "ElectorsD": 186
            }
        ],
        "format": {
            "parse": {}
        }
    },
    "width": 800,
    "$schema": "https://vega.github.io/schema/vega-lite/v4.json",
    "title": "Popular vote share and Electoral Votes: 2016 weightings vs. 2018 weightings",
    "layer": [
        {
            "transform": [
                {
                    "as": "Vote Share (%)",
                    "calculate": "100 * datum.DemPref"
                },
                {
                    "as": "Weight Source",
                    "calculate": "datum.ElectoralWeightSource + '/' + datum.DemographicGrouping"
                }
            ],
            "mark": {
                "size": 100,
                "tooltip": {
                    "content": "data"
                },
                "type": "point",
                "filled": true
            },
            "encoding": {
                "color": {
                    "field": "year",
                    "type": "nominal"
                },
                "shape": {
                    "field": "Weight Source"
                },
                "x": {
                    "field": "Vote Share (%)",
                    "scale": {
                        "domain": [
                            48.5,
                            54
                        ]
                    },
                    "title": "D Vote Share (%)",
                    "type": "quantitative"
                },
                "y": {
                    "field": "ElectorsD",
                    "scale": {
                        "domain": [
                            170,
                            370
                        ]
                    },
                    "title": "# D Electoral Votes",
                    "type": "quantitative"
                }
            }
        },
        {
            "transform": [
                {
                    "as": "50%",
                    "calculate": "50"
                }
            ],
            "mark": "rule",
            "encoding": {
                "x": {
                    "field": "50%",
                    "scale": {
                        "domain": [
                            48,
                            53
                        ]
                    },
                    "title": null,
                    "type": "quantitative"
                }
            }
        },
        {
            "transform": [
                {
                    "as": "Evenly Split",
                    "calculate": "269"
                }
            ],
            "mark": "rule",
            "encoding": {
                "y": {
                    "field": "Evenly Split",
                    "scale": {
                        "domain": [
                            170,
                            370
                        ]
                    },
                    "title": null,
                    "type": "quantitative"
                }
            }
        }
    ],
    "padding": 10
};
vegaEmbed('#figure_2',vlSpec);</script>
</figure>
<section id="model-notes" class="level2">
<h2>Model Notes</h2>
<p>As we continue to work on this data we try to refine and improve our modeling. In this post we have shifted from using the census summary of the CPS voter supplement to using the CPS microdata itself, as harmonized via the <a href="https://cps.ipums.org/cps/">IPUMS</a> web portal. This has several advantages. Firstly, the micro-data allows us to get turnout numbers at the <em>state</em> level. Actually, the data is given at the county level, but since counties don’t map neatly onto congressional districts or state legislative districts, this is less useful. Also useful is that the microdata has more demographic information. For example, the summary tables allow us to explore the variables of age, sex and race <em>or</em> ag, sex, and education but not age, sex, education, and race. This is important since the combination of education and race is necessary to explore the voting and turnout patterns of the so-called “White Working Class,” a crucial voting block in the past few elections. Another nice benefit is that the microdata contains more information about voting. It includes data about whether people voted by mail or voted early and some information about why registered non-voters didn’t vote. For all those reasons, going forward we will be using the mocro-data sourced CPS turnout data instead of the previous nationally-aggregated summaries of that data.</p>
<p><em>Want to read more from Blue Ripple? Visit our <a href="https://www.blueripplepolitics.org">website</a>, sign up for <a href="http://eepurl.com/gzmeQ5">email updates</a>, and follow us on <a href="https://twitter.com/BlueRipplePol">Twitter</a> and <a href="https://www.facebook.com/blueripplepolitics">FaceBook</a>. Folks interested in our data and modeling efforts should also check out our <a href="https://github.com/blueripple">Github</a> page.</em></p>
</section>
<!--
  <div class="br-readmore">
  Want To read more from Blue Ripple? Visit our
  <a href="https://blueripple.org">website</a>,
  sign up for <a href="http://eepurl.com/gzmeQ5">email updates</a>,
    and follow us on <a href="https://twitter.com/BlueRipplePol">Twitter</a>
    and <a href="https://www.facebook.com/blueripplepolitics/">FaceBook</a>.
    Folks interested in our data and modeling efforts should also check out
    our <a href="https://github.com/blueripple">Github page</a>.
  </div>
-->
<!-- page content ends here -->

</div>     <!-- pure-u-1... -->
</div>     <!-- pure-g -->
</section> <!-- page-content -->
<footer>
  <div class="br-header">
    <div class="br-header-item br-header-br" style="width: 8em">
      <p>BLUE RIPPLE POLITICS</p>
    </div>
    <div class="br-header-item br-home-button-c">
      <a href="https://www.blueripplepolitics.org">
	<div class="br-home-button-b">HOME</div>
      </a>
    </div>
  </div>
</footer>
<!--
<script>
var mindoc=function(){function e(e){return e=e.toLowerCase(),e.charAt(0).toUpperCase()+e.substr(1)}function n(e){var n=new RegExp(/^\b[a-z]\S+\b-\b\S+\b/);return n.test(e)&&(e=e.replace(/-+/g," ")),e}function t(t){return t=n(t),e(t)}function r(e,n){return!!e.className.match(new RegExp("(\\s|^)"+n+"(\\s|)"))}function a(e,n){r(e,n)||(e.className+=" "+n)}function o(e,n){if(r(e,n)){var t=new RegExp("(\\s|^)"+n+"(\\s|)");e.className=e.className.replace(t," ")}}function u(){var e,n,t={table:"pure-table pure-table-bordered"};Object.keys(t).forEach(function(r){if(e=document.getElementsByTagName(r),n=e.length,n>1)for(var o=0;n>o;o++)a(e[o],t[r])})}function c(e,n){for(var t=0,r=e.length;r>t;t++)for(var a=e[t].getElementsByTagName("a"),u=0,c=a.length;c>u;u++)a[u].addEventListener("click",function(){o(n,"hidden")})}function i(e,n){for(var t=0,r=e.length;r>t;t++)e[t].addEventListener("click",function(){o(n,"hidden")})}function d(){var e=document.createElement("li");return a(e,"pure-menu-item"),e}function l(e){var n=document.createElement("a");return n.id="menu-"+e,n.href="#",n.innerHTML=t(e),a(n,"pure-menu-link"),n}function m(e){var n=document.createDocumentFragment(),t=document.createElement("nav"),r=document.createElement("div"),o=document.createElement("ul");n.appendChild(t),t.appendChild(r),r.appendChild(o),a(r,"pure-menu"),a(o,"pure-menu-list");var u="All sections",c=d();a(c,"pure-menu-selected"),o.appendChild(c),c.appendChild(l(u));for(var i,m,s=0,f=e.length;f>s;s++)i=e[s].getAttribute("id"),m=d(),o.appendChild(m),m.appendChild(l(i));var p=document.getElementById("page-content");document.querySelector("body").insertBefore(n,p)}function s(e){var n;e.hasAttribute("pure-menu-selected")||(n=document.querySelector(".pure-menu-selected"),o(n,"pure-menu-selected"),a(e,"pure-menu-selected"))}function f(e,n){var t,u=n.getAttribute("id"),c=u.replace(/menu-/,""),i=document.getElementById(u).parentNode;s(i);for(var d in e)t=e[d],r(t,"hidden")||a(t,"hidden"),t.getAttribute("id")===c&&r(t,"hidden")&&o(t,"hidden")}function p(e){var n;for(var t in e)n=e[t],r(n,"hidden")&&o(n,"hidden")}function v(e){for(var n=document.querySelectorAll(".pure-menu-link"),t=0,r=n.length;r>t;t++)0===t?n[t].addEventListener("click",function(){p(e)}):n[t].addEventListener("click",function(){f(e,this)})}return{main:function(){if(u(),document.getElementsByClassName("level2").length>0){var e,n=[];["abstract","level2","footnotes"].forEach(function(t){e=document.getElementsByClassName(t);for(var r=0,a=e.length;a>r;r++)n.push(e[r])});var t;for(var o in n)t=n[o],r(t,"level2")||a(t,"level2"),r(t,"footnotes")&&t.setAttribute("id","footnotes");m(n),v(n);var d=document.getElementsByClassName("citation"),l=document.getElementById("references");c(d,l);var s=document.getElementsByClassName("footnoteRef"),f=document.getElementById("footnotes");i(s,f)}}}}();window.addEventListener("load",function(){mindoc.main()});
</script>
-->
<!-- For debugging local scripts -->
<!-- <script src="../build/mindoc.js"></script> -->
</body>
</html>
